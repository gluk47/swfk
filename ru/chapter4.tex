% !TeX encoding = UTF-8
% Use XeLaTeX to compile it
%
% Эта работа распространяется на условиях лицензии Creative Commons Attribution-Noncommercial-Share Alike 3.0 New Zealand License.
% Краткое описание лицензии есть тут: http://creativecommons.org/licenses/by-nc-sa/3.0/nz/deed.ru
% Полное — там же.
% Эту книгу можно невозбранно распространять и изменять, но только соблюдая следующие условия:
% сохраняя лицензию и не вводя дополнительных ограничений, бесплатно
% и указывая авторство как оригинальной части, так и изменённой.
% Автор оригинального английского текста — Jason R Briggs http://jasonrbriggs.com/
% Автор перевода — Егор Кочетов <Egor.Kochetoff@gmail.com>
%
% This work is licensed under the Creative Commons Attribution-Noncommercial-Share Alike 3.0 New Zealand License.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/nz
% or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.
%

\chapter{Как задать вопрос}\label{ch:howtoaskaquestion}

С точки зрения программистов, вопрос задаётся тогда, когда в зависимости от ответа нужно выполнить одни команды или другие. Во многих языках программирования такой вопрос записывается с использованием слова \code{if}\index{if}, что на русский переводится как «если»\footnote{В некоторых языках прямо по-русски и пишут «если», но всё же обычно так не принято делать. В Питоне надо писать \code{if}.}. Такое выражение ещё называется \textbf{условным оператором}.

\begin{quotation}
Сколько тебе лет? Если тебе больше двадцати, ты супер стар!
\end{quotation}

Утверждение выше на Питоне может быть записано вот так:

\begin{listing}
\begin{verbatim}
if возраст > 20:
    print('ты супер стар!')
\end{verbatim}
\end{listing}

Условный оператор состоит из слова \code{if}, после которого записывается условие, завершаемое двоеточием (\code{:}). Все следующие строки, которые выполняются в зависимости от этого условия, должны начинаться с одинакового количества пробелов. Большинство людей использует тут 4 пробела, потому что так уже легко видеть \textit{блок кода}, и при этом он не слишком далеко уезжает направо. Для вставки такого отступа в начало строки обычно используют клавишу \texttt{Tab}, она на клавиатуре слева (←) под цифрами, слева от буквы Й.

Если ответ на вопрос, который написан после \code{if}, — да, или \code{True}, как это записывается в Питоне, то блок кода, начинающийся с отступов, выполняется.

Условие, которое надо писать после \code{if}, — это выражение, на которое можно ответить «да» (\code{True}, «истина») или «нет» (\code{False}, «ложь»). Чтобы записывать условия, есть специальные значки, вот они:

\begin{center}
\begin{tabular}{|c|c|}
\hline
$==$ & равно \\
\hline
$!=$ & не равно \\
\hline
$>$ & больше чем \\
\hline
$<$ & меньше чем \\
\hline
$>=$ & больше чем или равно \\
\hline
$<=$ & меньше чем или равно \\
\hline
\end{tabular}
\end{center}

Например, если тебе 10 лет, то условие \code{твой\_возраст == 10} истинно (равно \code{True}). Если же тебе не 10 лет, то оно ложно (равно \code{False}). Тут есть хитрость: чтобы сравнить два числа, надо написать два знака равенства подряд. Если написать только один, будет ошибка. А один знак нужно писать, чтобы в переменную занести какое-нибудь значение, то есть никак не после \code{if}.

Теперь допустим, что тебе больше 10 лет и в переменной \code{age} хранится твой возраст. Тогда вот такое условие…

\begin{listing}
\begin{verbatim}
age > 10
\end{verbatim}
\end{listing}

…будет равно \code{True}. А если тебе меньше 10 лет, то это условие будет равно \code{False}. И если тебе 10 лет, условие тоже будет ложно, зато будет истинно условие \code{age>=10}.

Давай попробуем теперь ввести примеры в консоль:

\begin{listing}
\begin{verbatim}
>>> age = 10
>>> if age > 10:
...     print('я тут!')
\end{verbatim}
\end{listing}

Если ввести это в консоль, что произойдёт?..

Да ничего.

Переменная \code{age} не больше 10, так что \code{print} не выполнится. А как насчёт такого:

\begin{listing}
\begin{verbatim}
>>> age = 10
>>> if age >= 10:
...     print('тут я!')
\end{verbatim}
\end{listing}

Вот если этот пример запустить, то Питон выведет сообщение в консоль. И следующий пример тоже сработает:

\begin{listing}
\begin{verbatim}
>>> age = 10
>>> if age == 10:
...     print('вот я где!')
вот я где!
\end{verbatim}
\end{listing}

\section{Сделай вот это… ИЛИ ВОТ ЭТО!}

Можно расширить условный оператор и сказать Питону, что делать, когда условие ложно. Можно, например, напечатать в консоль «Привет», если тебе 12 лет или «Пока» в ином случае. Для этого пригодится слово \code{else} (в переводе — «иначе»)\index{else}.

\begin{listing}
\begin{verbatim}
>>> age = 12
>>> if age == 12:
...     print('Привет!')
... else:
...     print('Пока.')
Привет!
\end{verbatim}
\end{listing}

Если ты напечатаешь в консоль этот пример, то увидишь в ответ «Привет!». Стоит изменить значение переменной \code{age} на что-нибудь другое, как сообщение от Питона поменяется:

\begin{listing}
\begin{verbatim}
>>> age = 8
>>> if age == 12:
...     print('Привет!')
... else:
...     print('Пока.')
Пока.
\end{verbatim}
\end{listing}

\section{Сделай вот это… или ещё вот это… ИЛИ ВОТ ЭТО!}

Можно ещё дальше расширить условный оператор, используя слово \code{elif} (сокращение от «else if»). Например, можно вот так печатать, сколько тебе лет (да, не слишком полезно, но позволяет ухватить суть этого условного оператора):

\begin{listing}
\begin{verbatim}
 1. >>> age = 12
 2. >>> if age == 10:
 3. ...     print('похоже, тебе 10 лет')
 4. ... elif age == 11:
 5. ...     print('я знаю, тебе 11 лет')
 6. ... elif age == 12:
 7. ...     print('ух ты, а тебе 12 лет')
 8. ... elif age == 13:
 9. ...     print('тебе целых 13 лет!')
10. ... else:
11. ...     print('Столько люди не живут.')
12. ...
13. ух ты, а тебе 12 лет
\end{verbatim}
\end{listing}

В примере кода выше строка 2 проверяет, равно ли значение возраста 10. Если нет, то сразу после этого выполняется строчка 4, которая проверяет, равно ли значение возраста 11. Если нет — то проверяется условие в строке 6. Оно оказывается истинным, поэтому выполняется строка 7 и больше никаких проверок не производится.

\section{Комбинируем условия}\index{условия!комбинации}
Можно проверять внутри одного условия сразу несколько выражений. Для этого используются английские слова «и»: \code{and} и «или»: \code{or}. Так например, пример выше можно было бы записать следующим образом, объединив проверки в одно большое условие:

\begin{listing}
\begin{verbatim}
1. >>> if age == 10 or age == 11 or age == 12 or age == 13:
2. ...     print('Я знаю, тебе %s лет' % age)
3. ... else:
4. ...     print('Столько люди не живут.')
\end{verbatim}
\end{listing}

Если любое из условий в строке 1 истинно, то все следующие и не проверяются и выполняется блок кода, следующий за \code{if}, то есть строка 2 в этом примере. Если же все условия ложны, то выполнится блок кода под \code{else}, то есть строчка 4. Этот пример можно ещё сократить, воспользовавшись операциями сравнения $<=$ и $>=$:

\begin{listing}
\begin{verbatim}
1. >>> if age >= 10 and age <= 13:
2. ...     print('Тебе %s лет' % age)
3. ... else:
4. ...     print('А сколько же?')
\end{verbatim}
\end{listing}

Тут если твой возраст не меньше 10 лет и не больше 13, то Питон напечатает, сколько тебе лет, а иначе — удивится.

\section{Пустота}\index{None}

Есть ещё специальное значение, которое можно присвоить любой переменной, и о котором мы раньше не говорили: \textbf{ничего}.

Точно так же, как переменной можно присвоить числа, строки и списки, переменной можно присвоить и «ничего». В Питоне это записывается словом \code{None} и значит, что в переменной ничего нет (в других языках используют слова типа \code{nil}, \code{null}, \code{nullptr}). При этом значение этой переменной можно напечатать, как и значение любой другой, и это не вызовет ошибки, как было бы, если бы переменная вообще не была объявлена.

\begin{listing}
\begin{verbatim}
>>> myval = None
>>> print(myval)
None
\end{verbatim}
\end{listing}

Присвоить переменной \code{None} может быть нужно, чтобы указать, что переменная чему-то будет равна потом, но сейчас её значение неизвестно\footnote{Если же хочется вообще удалить переменную, то надо не присвоить ей \code{None}, а написать вот так (для переменной \code{myval}): \code{del myval}.}.

Вот пример: допустим, мы хотим сходить в кино втроём, и для этого нам надо скинуться деньгами, кому сколько не жалко. Когда все решат, сколько им не жалко, и положат сумму, например, в конверт, можно на эти деньги выбрать фильм и купить билеты (а чтобы показать все фильмы из ближайших кинотеатров, на которые хватит этих денег, вполне можно написать программу на Питоне). Так вот, для этого мы заведём три переменных для каждого из зрителей и запишем в них \code{None}, что будет значить, что человек ещё вообще не сдавал деньги (если бы мы записали туда 0, это бы значило, что человек не хочет и не будет сдавать денег):

\begin{listing}
\begin{verbatim}
>>> зритель1 = None
>>> зритель2 = None
>>> зритель3 = None
\end{verbatim}
\end{listing}

Теперь можно проверить, все ли сдали деньги, пользуясь \code{if}'ом:

\begin{listing}
\begin{verbatim}
>>> if зритель1 is None or зритель2 is None or зритель3 is None:
...     print('Надо подождать ещё, не все сдали деньги')
... else:
...     print('Мы собрали %s руб.' % (зритель1 + зритель2 + зритель3))
\end{verbatim}
\end{listing}

\code{if} проверяет, записано ли в какую-то переменную значение \code{None} и, если это так, сообщает об этом. Если же в каждую переменную записано, кто сколько сдал денег, то Питон напечатает нам общую собранную сумму.

Вот что будет, если только два человека решились:

\begin{listing}
\begin{verbatim}
>>> зритель1 = 100
>>> зритель2 = None
>>> зритель3 = 300
>>> if зритель1 is None or зритель2 is None or зритель3 is None:
...     print('Надо подождать ещё, не все сдали деньги')
... else:
...     print('Мы собрали %s руб.' % (зритель1 + зритель2 + зритель3))
Надо подождать ещё, не все сдали деньги
\end{verbatim}
\end{listing}

А вот, если все трое:

\begin{listing}
\begin{verbatim}
>>> зритель1 = 100
>>> зритель2 = 500
>>> зритель3 = 300
>>> if зритель1 is None or зритель2 is None or зритель3 is None:
...     print('Надо подождать ещё, не все сдали деньги')
... else:
...     print('Мы собрали %s руб.' % (зритель1 + зритель2 + зритель3))
Мы собрали 900 руб.
\end{verbatim}
\end{listing}

\section{В чём разница…?}\label{whatsthedifference}\index{равенство}

Какая разница между \code{10} и \code{'10'}?

Так вообще, кажется, что, кроме пары кавычек, её и нет. Хотя вот в предыдущих главах ты узнал, что \code{10} — это число, а \code{'10'} — строка. И это различие гораздо существеннее, чем можно подумать.

Недавно мы проверяли, чему равен возраст, вот так:

\begin{listing}
\begin{verbatim}
>>> if age == 10:
...     print('помни: тебе 10 лет')
\end{verbatim}
\end{listing}

И если в переменную \code{age} записать значение 10, то всё, что надо, на экране напечатается:

\begin{listing}
\begin{verbatim}
>>> age = 10
>>> if age == 10:
...     print('помни: тебе 10 лет')
...
помни: тебе 10 лет
\end{verbatim}
\end{listing}

Но если в ту же переменную записать \code{'10'} (с кавычками), то ничего печататься не будет:

\begin{listing}
\begin{verbatim}
>>> age = '10'
>>> if age == 10:
...     print('помни: тебе 10 лет')
...
\end{verbatim}
\end{listing}

Как же так? Почему теперь ничего не работает? Ну потому что строка — это не число, хотя и выглядят они одинаково:

\begin{listing}
\begin{verbatim}
>>> age1 = 10
>>> age2 = '10'
>>> print(age1)
10
>>> print(age2)
10
\end{verbatim}
\end{listing}

Вот, видишь! Выглядят совсем одинаково, если напечатать. Но число никогда не будет равно строке.

Это вроде как странно, но смысл какой-то такой, что если сравнивать 10 книг и 10 кирпичей, они никогда не будут равны — они просто разные. То есть можно сравнить 10 штук книг и 10 штук кирпичей — количество (число) одинаковое, но сказать, что 10 кирпичей — это одно и то же («равно»), что и 10 книг, вряд ли получится. Вот так и тут.

Но это не страшно, Питон умеет прочитать строку и понять, какое число там записано, и наоборот, записать цифрами число в строку. Вот так можно превратить строку \code{'10'} в число \code{10}:

\begin{listing}
\begin{verbatim}
>>> age = '10'
>>> converted_age = int(age)
\end{verbatim}
\end{listing}

Теперь переменная \code{converted\_age} хранит число 10 (не строку). Функция \code{int}, которая используется для такого преобразования, названа как сокращение от английского слова «integer», что значит «целое число», число без дробной части, без запятой.

Чтобы обратно перевести число в строку, есть функция \code{str} (сокращение от «string», «строка»):

\begin{listing}
\begin{verbatim}
>>> age = 10
>>> converted_age = str(age)
\end{verbatim}
\end{listing}

Теперь в переменной \code{converted\_age} лежит строка \code{'10'}. Самое время вернуться к тому сравнению, которое у нас не работало:

\begin{listing}
\begin{verbatim}
>>> age = '10'
>>> if age == 10:
...     print('Тебе %s лет' % age)
...
\end{verbatim}
\end{listing}

Если мы преобразуем переменную перед проверкой, тогда мы получим другой результат:

\begin{listing}
\begin{verbatim}
>>> age = '10'
>>> converted_age = int(age)
>>> if converted_age == 10:
...     print('Тебе %s лет' % age)
...
Тебе 10 лет
\end{verbatim}
\end{listing}

Или даже прямо так, короче и без дополнительной переменной:

\begin{listing}
\begin{verbatim}
>>> age = '10'
>>> if int(age) == 10:
...     print('Тебе %s лет' % age)
...
Тебе 10 лет
\end{verbatim}
\end{listing}
